<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultant Verification</title>
    <link rel="icon" type="image/png" href="../images/favicon.png">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/all.min.css">
</head>

<body>
    <header class="user-header">
            <a href="home.html" class="to_the_main"><div class="logo"><img src="../images/logo.png" alt="" class="pic_logo"></div></a>
            
            <div class="bell-menu">
                <!-- Bell Image link (https://www.google.com/url?sa=i&url=https%3A%2F%2Ficones.pro%2Fen%2Fpink-notification-bell-icon-png-symbol%2F&psig=AOvVaw3wDQe_UEJ1ORQ8DEZl_sjQ&ust=1745994682173000&source=images&cd=vfe&opi=89978449&ved=0CBgQjhxqFwoTCKi-9ZzP_IwDFQAAAAAdAAAAABAK) -->
                <a href="notifications.html" class="bell-div"><div class="bell-image"><img src="../images/bell.png" alt="" class="pic_logo"></div></a>
            <!-- Menu function -->
            <div id="menuHamToggle">
                <!-- Create Hidden Checkbos, that will be used as Click Function-->
                <input type="checkbox">
    
                <!-- Lets create three line hamburger menu
                Can animate to display as ham menu and closing menu tag.
                -->
                <span></span>
                <span></span>
                <span></span>
    
                <!-- Here menu goes -->
                <ul id="mainMenu">
                    <a href="profile.html"> <li> Profile </li></a>
                    <a href="user-management.html"> <li> User Management </li></a>
                    <a href="consultant-verification.html"> <li> Consultant Verification </li></a>
                    <a href="admin-inbox.html"> <li> Admin Inbox </li></a>
                    <a href="email-announcement.html"> <li> Email Announcement </li></a>
                    <a href="settings.html"> <li> Settings</li></a>
                    <a href="#" onclick="showSignOutModal()"> <li> Sign Out </li></a>
                </ul>
            </div>
            <!-- Menu function END -->
            </div>
 
    </header>
    
    
        <!-- Sign Out Confirmation Modal -->
    <div id="signOutModal" class="modal-overlay">
        <div class="modal-content">
          <p>Are you sure you want to sign out?</p>
          <div class="modal-buttons">
            <button onclick="confirmSignOut()">Yes</button>
            <button onclick="closeModal()">No</button>
          </div>
        </div>
    </div>
      
  <div class="submission-tabs">
    <button class="tab-button active" data-status="pending">Pending</button>
    <button class="tab-button" data-status="approved">Approved</button>
    <button class="tab-button" data-status="rejected">Rejected</button>
  </div>

    <div class="submission-table-container">
    <table id="submissionTable" class="submission-table">
      <thead class="submission-header">
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Email</th>
          <th>Type</th>
          <th>Submitted On</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody class="submission-body" id="submissionBody">
        <!-- Dynamic rows -->
      </tbody>
    </table>
  </div>
  <!-- reset dummy data -->
<!--   <button onclick="resetDummyData()">Reset to Default</button> -->
  
    <footer>
        <div>
            <div class="footer-logo"><img src="../images/logo.png" alt="" class="pic_logo"></div>
            <div class="social-icons">
                <a href="" class="twitter_link">
                    <img src="../images/twitter.png" alt="X">
                </a>
                <a href="" class="twitter_link">
                    <img src="../images/instagram.png" alt="Instagram">
                </a>
                <a href="" class="twitter_link1">
                    <img src="../images/youtube.png" alt="YouTube">
                </a>
                <a href="" class="twitter_link">
                    <img src="../images/linkedin.png" alt="LinkedIn">
                </a>
            </div>
        </div>
        <div class="footer-links">
            <h4 class="h4_service">Service & Contacts</h4>
            <a href="../faq.html" class="class_footer">
                <p>FAQ</p> 
            </a>
            <a href="../contact-us.html" class="class_footer">
                <p>Contact Us</p> 
            </a>
            <a href="../privacy-policy.html" class="class_footer">
                <p>Privacy Policy</p> 
            </a>
            <a href="../about-us.html" class="class_footer">
                <p>About Us</p>
            </a>
            <a href="../terms-conditions.html" class="class_footer">
              <p>Terms and Conditions</p>
          </a>
        </div>
    </footer>

    <script>
      function showSignOutModal() {
        document.getElementById('signOutModal').style.display = 'flex';
      }

      function closeModal() {
        document.getElementById('signOutModal').style.display = 'none';
      }

      function confirmSignOut() {
        window.location.href = "../../";
      }
let submissions = JSON.parse(localStorage.getItem('consultantSubmissions')) || [
  {
    firstName: 'Serhat',
    lastName: 'Günay',
    email: 'serhat@xyz.com',
    type: 'Study Abroad',
    submittedOn: '29.05.25',
    status: 'pending'
  },
  {
    firstName: 'asd',
    lastName: 'dfg',
    email: 'qwe@xyz.com',
    type: 'Study Abroad',
    submittedOn: '22.05.25',
    status: 'pending'
  },
  {
    firstName: 'asd1',
    lastName: 'dfg1',
    email: 'qwe1@xyz.com',
    type: 'Internship Abroad',
    submittedOn: '21.05.25',
    status: 'pending'
  },
  {
    firstName: 'Elif',
    lastName: 'Kaya',
    email: 'elif@web.de',
    type: 'Internship Abroad',
    submittedOn: '30.05.25',
    status: 'approved'
  },
  {
    firstName: 'Mehmet',
    lastName: 'Ali',
    email: 'mehmet@example.com',
    type: 'Study Abroad',
    submittedOn: '28.05.25',
    status: 'rejected'
  }
];

localStorage.setItem('consultantSubmissions', JSON.stringify(submissions));


    const tbody = document.getElementById('submissionBody');
    const tabButtons = document.querySelectorAll('.tab-button');

    function renderTable(statusFilter) {


      tbody.innerHTML = '';
      submissions.forEach(sub => {
        if (statusFilter === 'all' || sub.status === statusFilter) {
          const row = document.createElement('tr');
          row.setAttribute('data-status', sub.status);
          row.innerHTML = `
            <td>${sub.firstName}</td>
            <td>${sub.lastName}</td>
            <td>${sub.email}</td>
            <td>${sub.type}</td>
            <td>${sub.submittedOn}</td>
            <td>
                <span class="submission-action-link"
  onclick="previewSubmission('${sub.firstName}', '${sub.lastName}', '${sub.email}', '${sub.type}', '${sub.status}')">
  Preview
</span>



            </td>

          `;
          tbody.appendChild(row);
        }
      });
    }

function previewSubmission(firstName, lastName, email, type, status) {
  let consultant = {
    firstName,
    lastName,
    email,
    type
  };

  // dummy fields
  if (type.toLowerCase().includes("study")) {
    consultant = {
      ...consultant,
      university: 'Example University',
      course: 'Example Course',
      period: '09.2021 - 06.2024',
      locationAbroad: 'Oxford, UK',
      currentLocation: 'Berlin, Germany',
      languages: 'English, German'
    };
  } else if (type.toLowerCase().includes("internship")) {
    consultant = {
      ...consultant,
      company: 'Example Company',
      department: 'Software Engineering Department',
      period: '09.2023 - 02.2024',
      locationCompany: 'Hamburg, Germany',
      currentLocation: 'Berlin, Germany',
      languages: 'English, German'
    };
  } else {
    alert("No preview page for this consultant type.");
    return;
  }

  localStorage.setItem("selectedConsultant", JSON.stringify(consultant));

  // Only add ?mode=view for approved/rejected
  const isViewOnly = status !== 'pending';
  const suffix = isViewOnly ? '?mode=view' : '';

  if (type.toLowerCase().includes("study")) {
    window.location.href = "consultant-preview-study.html" + suffix;
  } else if (type.toLowerCase().includes("internship")) {
    window.location.href = "consultant-preview-internship.html" + suffix;
  }
}

//reset dummy data
function resetDummyData() {
  const defaultSubmissions = [
    {
      firstName: 'Serhat',
      lastName: 'Günay',
      email: 'serhat@xyz.com',
      type: 'Study Abroad',
      submittedOn: '29.05.25',
      status: 'pending'
    },
    {
      firstName: 'asd',
      lastName: 'dfg',
      email: 'qwe@xyz.com',
      type: 'Study Abroad',
      submittedOn: '22.05.25',
      status: 'pending'
    },
    {
      firstName: 'asd1',
      lastName: 'dfg1',
      email: 'qwe1@xyz.com',
      type: 'Internship Abroad',
      submittedOn: '21.05.25',
      status: 'pending'
    },
    {
      firstName: 'Elif',
      lastName: 'Kaya',
      email: 'elif@web.de',
      type: 'Internship Abroad',
      submittedOn: '30.05.25',
      status: 'approved'
    },
    {
      firstName: 'Mehmet',
      lastName: 'Ali',
      email: 'mehmet@example.com',
      type: 'Study Abroad',
      submittedOn: '28.05.25',
      status: 'rejected'
    }
  ];

  localStorage.setItem('consultantSubmissions', JSON.stringify(defaultSubmissions));
  location.reload();
}


    tabButtons.forEach(btn => {
      btn.addEventListener('click', function() {
        tabButtons.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        renderTable(this.dataset.status);
      });
    });

    renderTable('pending');
    </script>
    
    <script src="../script.js"></script>
</body>
</html>